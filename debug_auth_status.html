<!DOCTYPE html>
<html>
<head>
    <title>Auth Debug</title>
</head>
<body>
    <h1>인증 디버깅</h1>
    
    <div id="results"></div>

    <script>
    console.log('=== 인증 디버깅 시작 ===');
    
    // 1. 쿠키 확인
    console.log('현재 쿠키:', document.cookie);
    
    // 2. 특정 auth_token 쿠키 확인
    function getCookie(name) {
        const value = `; ${document.cookie}`;
        const parts = value.split(`; ${name}=`);
        if (parts.length === 2) return parts.pop().split(';').shift();
        return null;
    }
    
    const authToken = getCookie('auth_token');
    console.log('auth_token 쿠키:', authToken);
    
    // 3. 메인 페이지 접근 테스트
    fetch('/')
        .then(response => {
            console.log('메인 페이지 응답 상태:', response.status);
            console.log('메인 페이지 응답 헤더:', response.headers);
            return response.text();
        })
        .then(html => {
            console.log('메인 페이지 HTML 길이:', html.length);
            console.log('HTML에 "login" 포함 여부:', html.includes('login'));
            console.log('HTML에 "location.replace" 포함 여부:', html.includes('location.replace'));
            
            document.getElementById('results').innerHTML = `
                <p><strong>쿠키:</strong> ${document.cookie || '없음'}</p>
                <p><strong>auth_token:</strong> ${authToken || '없음'}</p>
                <p><strong>메인 페이지 접근 가능:</strong> ${html.length > 100 ? '예' : '아니오'}</p>
                <p><strong>로그인 리다이렉트 스크립트 포함:</strong> ${html.includes('location.replace') ? '예' : '아니오'}</p>
            `;
        })
        .catch(error => {
            console.error('메인 페이지 접근 오류:', error);
            document.getElementById('results').innerHTML = `<p style="color: red;">오류: ${error.message}</p>`;
        });
    
    // 4. 로컬스토리지 확인
    console.log('로컬스토리지 내용:', localStorage);
    console.log('세션스토리지 내용:', sessionStorage);
    
    </script>
</body>
</html>
